{"version":3,"sources":["node_modules/browser-pack/_prelude.js","javascript/index.js","javascript/modules/ImageGeolocationHandler.js","javascript/modules/UploadFileHandler.js","javascript/modules/ValidateHandler.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_UploadFileHandler","_interopRequireDefault","UIinput","document","querySelector","UIoutput","uploadImage","removeImage","ImageGeolocationHandler","toDecimal","number","numerator","denominator","returnLongLat","imgHTMLElement","callback","EXIF","getData","longitude","getTag","this","latitude","longLat","_ImageGeolocationHandler","_ValidateHandler","UploadFileHandler","singleImageTemplate","fileObject","pictureInfoList","createElement","imageMiniature","image","fileName","fileExtension","fileSize","fileGeoLocation","removeButton","src","URL","createObjectURL","appendChild","innerText","concat","name","type","size","classList","add","onload","imageUploadHandler","fileInput","outputContainer","addEventListener","event","Array","from","target","files","forEach","file","validateGPSData","removeImageHandler","imagesContainer","className","parentElement","remove","ValidateHandler","hasGPSdata","fetchEXIF","valid","console","log","validateFileSize","fileSizeKB","fileSizeLimitKB","validateFileExtension","acceptableFileExtensionsArray","includes"],"mappings":"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","file":"index.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import UploadFileHandler from './modules/UploadFileHandler';\n\nconst UIinput = document.querySelector('#upload-file__image');\nconst UIoutput = document.querySelector('#upload-preview');\nUploadFileHandler.uploadImage(UIinput, UIoutput);\nUploadFileHandler.removeImage(UIoutput);","//Module getting the geolocation of the image\n    //Accepts image and a callback function that handles the data return\n\nconst ImageGeolocationHandler = (function(){\n    //Helper function returning longitude and latitude as a float\n    const toDecimal = function (number) {\n        return number[0].numerator + number[1].numerator /\n            (60 * number[1].denominator) + number[2].numerator / (3600 * number[2].denominator);\n    };\n\n    function returnLongLat(imgHTMLElement, callback){\n        //function accepting the image and callback returning the data\n        EXIF.getData(imgHTMLElement, function(){\n\n            let longitude = toDecimal(EXIF.getTag(this,'GPSLongitude'));\n            let latitude = toDecimal(EXIF.getTag(this, 'GPSLatitude')); \n            \n            const longLat = {\n                longitude: longitude,\n                latitude: latitude\n            }   \n\n            callback(longLat)\n        })\n    }\n\n    //Public functions\n    return {\n        returnLongLat: returnLongLat \n    }\n\n})();\n\nexport default ImageGeolocationHandler;","//Modeule handling image upload and getting all information\nimport ImageGeolocationHandler from './ImageGeolocationHandler';\nimport ValidateHandler from './ValidateHandler';\n\nconst UploadFileHandler = (function(ImageGeolocationHandler){\n    \n    function singleImageTemplate(fileObject){             \n        //Create DOM elements\n        const pictureInfoList = document.createElement('ul');\n            const imageMiniature = document.createElement('li');\n            const image = document.createElement('img');\n            const fileName = document.createElement('li');\n            const fileExtension = document.createElement('li');\n            const fileSize = document.createElement('li');\n            let fileGeoLocation = document.createElement('li');\n            const removeButton = document.createElement('li');\n\n        //Update DOM elements with data\n        image.src = URL.createObjectURL(fileObject);\n        imageMiniature.appendChild(image);\n        fileName.innerText = `File name: ${fileObject.name}`;\n        fileExtension.innerText = `File extension: ${fileObject.type}`;\n        fileSize.innerText = `File size: ${fileObject.size}`;\n        removeButton.innerText = 'remove item';\n            removeButton.classList.add('btn-remove')\n        \n        image.onload = function(){\n            ImageGeolocationHandler.returnLongLat(image, function(longLat){\n                fileGeoLocation.innerText = `Picture was taken on longitude: ${longLat.longitude}, and latitude: ${longLat.latitude}`\n            })\n        }\n\n        //Update the parent list\n        pictureInfoList.appendChild(imageMiniature);\n        pictureInfoList.appendChild(fileName);\n        pictureInfoList.appendChild(fileExtension);\n        pictureInfoList.appendChild(fileSize);\n        pictureInfoList.appendChild(fileGeoLocation);\n        pictureInfoList.appendChild(removeButton);\n\n        return pictureInfoList;\n    }\n\n    function imageUploadHandler(fileInput, outputContainer){\n        //Add on change event handler to upload image to website\n        fileInput.addEventListener('change', function(event){\n            const fileInput = Array.from(event.target.files); \n            fileInput.forEach(function(file){\n                ValidateHandler.validateGPSData(file)\n                //Create single uploaded image and add metadata  \n                outputContainer.appendChild(singleImageTemplate(file));\n            })\n        })\n    }\n\n    function removeImageHandler(imagesContainer){\n        imagesContainer.addEventListener('click', function(event){\n            if(event.target.className === \"btn-remove\"){\n                event.target.parentElement.remove()\n            }\n        })\n    }\n    \n    return{\n        uploadImage: imageUploadHandler,\n        removeImage: removeImageHandler,\n        singleImageTemplate: singleImageTemplate\n    }\n})(ImageGeolocationHandler)\n\n\nexport default UploadFileHandler;","\nconst ValidateHandler = (function(){\n\n    const validateGPSData = function(image){\n        let hasGPSdata = 'test';\n        //Todo Figuring out how to validate if image has the data\n        function fetchEXIF(image, callback){\n            EXIF.getData(image, function(){\n                let valid = EXIF.getTag(this, 'GPSLongitude') ? true : false;\n                callback(valid);\n            }) \n        }\n\n        fetchEXIF(image, function(valid){\n            //console.log(valid)\n            console.log(hasGPSdata)\n            hasGPSdata = valid;\n        })\n\n        console.log(hasGPSdata)\n    }\n\n    const validateFileSize = function(fileSizeKB,fileSizeLimitKB){\n        return (fileSizeKB > fileSizeLimitKB)\n    }\n\n    const validateFileExtension = function(fileExtension,acceptableFileExtensionsArray){\n        return (acceptableFileExtensionsArray.includes(fileExtension))\n    }\n\n    return{\n        validateFileSize: validateFileSize,\n        validateFileExtension: validateFileExtension,\n        validateGPSData: validateGPSData\n    }\n})();\n\nexport default ValidateHandler;"]}