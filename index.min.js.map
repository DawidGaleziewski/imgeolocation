{"version":3,"sources":["node_modules/browser-pack/_prelude.js","javascript/index.js","javascript/modules/AlertHandler.js","javascript/modules/ImageGeolocationHandler.js","javascript/modules/UploadFileHandler.js","javascript/modules/ValidateHandler.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_UploadFileHandler","_interopRequireDefault","UIinput","document","querySelector","UIoutput","uploadImage","removeImage","AlertHandler","displayError","message","errorDurationTime","errorTemplate","createElement","classList","add","innerText","concat","prepend","setTimeout","removeChild","ImageGeolocationHandler","toDecimal","number","numerator","denominator","returnLongLat","imgHTMLElement","callback","EXIF","getData","longitude","getTag","this","latitude","longLat","_ImageGeolocationHandler","_ValidateHandler","_AlertHandler","UploadFileHandler","singleImageTemplate","fileObject","pictureInfoList","imageMiniature","image","fileName","fileExtension","fileSize","fileGeoLocation","removeButton","src","URL","createObjectURL","appendChild","name","type","size","onload","imageUploadHandler","fileInput","outputContainer","addEventListener","event","Array","from","target","files","forEach","file","validateImage","errors","console","log","hasGPSData","goodFileSize","validFileExtension","removeImageHandler","imagesContainer","className","parentElement","remove","ValidateHandler","_validateGPSData","valid","_validateFileSize","fileSizeLimitKB","fileSizeKB","_validateFileExtension","acceptableFileExtensionsArray","includes","gpsIsValid"],"mappings":"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","file":"index.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import UploadFileHandler from './modules/UploadFileHandler';\n\nconst UIinput = document.querySelector('#upload-file__image');\nconst UIoutput = document.querySelector('#upload-preview');\nUploadFileHandler.uploadImage(UIinput, UIoutput);\nUploadFileHandler.removeImage(UIoutput);","const AlertHandler = (function(){\n\n    function displayError(message, UIoutput, errorDurationTime){\n        const errorTemplate = document.createElement('p');\n            errorTemplate.classList.add('error-popup');\n            errorTemplate.innerText = `Error: ${message}`;\n\n        UIoutput.prepend(errorTemplate);\n\n        setTimeout(function(){\n            UIoutput.removeChild(errorTemplate)\n        }, errorDurationTime) \n    }\n\n    return{\n        displayError: displayError\n    }\n})();\n\nAlertHandler.displayError('Not enough swagg!', document.querySelector('body'), 3000)\n\nexport default AlertHandler","//Module getting the geolocation of the image\n    //Accepts image and a callback function that handles the data return\n\nconst ImageGeolocationHandler = (function(){\n    //Helper function returning longitude and latitude as a float\n    const toDecimal = function (number) {\n        return number[0].numerator + number[1].numerator /\n            (60 * number[1].denominator) + number[2].numerator / (3600 * number[2].denominator);\n    };\n\n    function returnLongLat(imgHTMLElement, callback){\n        //function accepting the image and callback returning the data\n        EXIF.getData(imgHTMLElement, function(){\n\n            let longitude = toDecimal(EXIF.getTag(this,'GPSLongitude'));\n            let latitude = toDecimal(EXIF.getTag(this, 'GPSLatitude')); \n            \n            const longLat = {\n                longitude: longitude,\n                latitude: latitude\n            }   \n\n            callback(longLat)\n        })\n    }\n\n    //Public functions\n    return {\n        returnLongLat: returnLongLat \n    }\n\n})();\n\nexport default ImageGeolocationHandler;","//Modeule handling image upload and getting all information\nimport ImageGeolocationHandler from './ImageGeolocationHandler';\nimport ValidateHandler from './ValidateHandler';\nimport AlertHandler from './AlertHandler';\n\nconst UploadFileHandler = (function(ImageGeolocationHandler){\n    \n    function singleImageTemplate(fileObject){             \n        //Create DOM elements\n        const pictureInfoList = document.createElement('ul');\n            const imageMiniature = document.createElement('li');\n            const image = document.createElement('img');\n            const fileName = document.createElement('li');\n            const fileExtension = document.createElement('li');\n            const fileSize = document.createElement('li');\n            let fileGeoLocation = document.createElement('li');\n            const removeButton = document.createElement('li');\n\n        //Update DOM elements with data\n        image.src = URL.createObjectURL(fileObject);\n        imageMiniature.appendChild(image);\n        fileName.innerText = `File name: ${fileObject.name}`;\n        fileExtension.innerText = `File extension: ${fileObject.type}`;\n        fileSize.innerText = `File size: ${fileObject.size}`;\n        removeButton.innerText = 'remove item';\n            removeButton.classList.add('btn-remove')\n        \n        image.onload = function(){\n            ImageGeolocationHandler.returnLongLat(image, function(longLat){\n                fileGeoLocation.innerText = `Picture was taken on longitude: ${longLat.longitude}, and latitude: ${longLat.latitude}`\n            })\n        }\n\n        //Update the parent list\n        pictureInfoList.appendChild(imageMiniature);\n        pictureInfoList.appendChild(fileName);\n        pictureInfoList.appendChild(fileExtension);\n        pictureInfoList.appendChild(fileSize);\n        pictureInfoList.appendChild(fileGeoLocation);\n        pictureInfoList.appendChild(removeButton);\n\n        return pictureInfoList;\n    }\n\n    function imageUploadHandler(fileInput, outputContainer){\n        //Add on change event handler to upload image to website\n        fileInput.addEventListener('change', function(event){\n            const fileInput = Array.from(event.target.files); \n            fileInput.forEach(function(file){\n                ValidateHandler.validateImage(file, function(errors){\n                    console.log(errors)\n                    if(errors.hasGPSData && errors.goodFileSize && errors.validFileExtension){\n                        //Create single uploaded image and add metadata  \n                        outputContainer.appendChild(singleImageTemplate(file));\n                    } else {\n                        console.log('not all good')\n                    }\n                })\n            })\n        })\n    }\n\n    function removeImageHandler(imagesContainer){\n        imagesContainer.addEventListener('click', function(event){\n            if(event.target.className === \"btn-remove\"){\n                event.target.parentElement.remove()\n            }\n        })\n    }\n    \n    return{\n        uploadImage: imageUploadHandler,\n        removeImage: removeImageHandler,\n        singleImageTemplate: singleImageTemplate\n    }\n})(ImageGeolocationHandler)\n\n\nexport default UploadFileHandler;","\nconst ValidateHandler = (function(){\n\n    const _validateGPSData = function(image, callback){\n        EXIF.getData(image, function(){\n            let valid = EXIF.getTag(this, 'GPSLongitude') ? true : false; \n            callback(valid);\n        }) \n    }\n\n    const _validateFileSize = function(fileSize,fileSizeLimitKB){\n        const fileSizeKB = fileSize/1000;\n        return (fileSizeKB <= fileSizeLimitKB)\n    }\n\n    const _validateFileExtension = function(fileExtension,acceptableFileExtensionsArray){\n        return (acceptableFileExtensionsArray.includes(fileExtension))\n    }\n\n    //Validate image and return a object with checks in the callback\n    const validateImage = function(image, callback){\n        const errors = {\n            hasGPSData:  false,\n            goodFileSize: false,\n            validFileExtension: false\n        }\n\n        _validateGPSData(image, function(gpsIsValid){\n            errors.hasGPSData = gpsIsValid;\n            errors.goodFileSize = _validateFileSize(image.size, 1000);\n            errors.validFileExtension = _validateFileExtension(image.type, [\"image/jpeg\"])\n            callback(errors)\n        })\n\n\n    }\n\n    return{\n        validateImage: validateImage\n    }\n})();\n\nexport default ValidateHandler;"]}