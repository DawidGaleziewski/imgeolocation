!function(e){function t(t){for(var a,i,c=t[0],l=t[1],d=t[2],u=0,p=[];u<c.length;u++)i=c[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(s&&s(t);p.length;)p.shift()();return r.push.apply(r,d||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,c=1;c<n.length;c++){var l=n[c];0!==o[l]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},o={0:0},r=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var s=l;r.push([5,1]),n()}([,,function(e,t,n){var a,o,r=n(1),i={validateImage:function(e,t){var n={hasGPSData:{isCorrect:!1,description:"Image uploaded does not have EXIF metadata on geolocation"},goodFileSize:{isCorrect:!1,description:"Image uploaded is to big"},validFileExtension:{isCorrect:!1,description:"Bad file format"}};!function(e,t){r.getData(e,(function(){var n=void 0!==r.getTag(e,"GPSLongitude");t(n)}))}(e,(function(r){n.hasGPSData.isCorrect=r,n.goodFileSize.isCorrect=a(e.size,1e3),n.validFileExtension.isCorrect=o(e.type,["image/jpeg"]),t(n)}))},validateFileSize:a=function(e,t){return e/1e3<=t},validateFileExtension:o=function(e,t){return t.includes(e)}};e.exports=i},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);n(3);var a,o=n(1),r=(a=function(e){return e[0].numerator+e[1].numerator/(60*e[1].denominator)+e[2].numerator/(3600*e[2].denominator)},{returnLongLat:function(e,t){o.getData(e,(function(){var n=a(o.getTag(e,"GPSLongitude")),r=a(o.getTag(e,"GPSLatitude"));t({longitude:n,latitude:r})}))}}),i=n(2),c=n.n(i),l={displayError:function(e,t,n){Object.keys(e).filter((function(t){return!1===e[t].isCorrect})).map((function(t){return e[t].description})).forEach((function(e){var a=document.createElement("div");a.className="card alert";var o=document.createElement("span");o.className="error-text",o.innerText="Error: ".concat(e),a.appendChild(o),t.prepend(a),setTimeout((function(){t.removeChild(a)}),n)}))}},d=n(0),s=n(0);console.log(s);var u="../../assets/markers",p="".concat(u,"/marker-icon-2x.png"),m="".concat(u,"/marker-icon.png"),f="".concat(u,"/marker-shadow.png"),g=Object(d.icon)({iconRetinaUrl:p,iconUrl:m,shadowUrl:f,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});d.Marker.prototype.options.icon=g;var v,h,b=(v=s.map("mapid").setView([51.505,-.09],13),h=[],{setMarker:function(e,t){h.push({latitude:e.latitude,longitude:e.longitude,objectReference:new s.marker([e.latitude,e.longitude]).bindPopup("Picture name: ".concat(t)).addTo(v)})},startMap:function(){s.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox.streets",accessToken:"pk.eyJ1IjoiZGF3aWRnYWxlemlld3NraWRldiIsImEiOiJjazF5MmtrenUwY21mM29uc3R2NWY2eG80In0.tnl8PPwx5p-xDKirHF6O2Q"}).addTo(v)},setView:function(e){v.panTo(new s.LatLng(e.latitude,e.longitude))},removeButtonOnClickHandler:function(e){var t,n=e.getAttribute("name").split("#"),a={longitude:parseFloat(n[1]),latitude:parseFloat(n[2])};t=a,h.forEach((function(e,n){console.log(e.longitude,t.longitude),e.longitude===t.longitude&&(v.removeLayer(e.objectReference),h.splice(n,1),console.log("bang",h))}))}}),y={singleImageTemplate:function(e){var t=document.createElement("div");t.classList.add("col"),t.classList.add("m4");var n=document.createElement("div");n.classList.add("card");var a=document.createElement("div");a.classList.add("card-image");var o=document.createElement("span");o.classList.add("card-title");var i=document.createElement("div");i.classList.add("card-content");var c=document.createElement("div");c.classList.add("card-action");var l=document.createElement("ul");l.classList.add("collection");var d=document.createElement("img"),s=document.createElement("li");s.classList.add("collection-item");var u=document.createElement("li");u.classList.add("collection-item");var p=document.createElement("li");p.classList.add("collection-item");var m=document.createElement("li");return d.src=URL.createObjectURL(e),o.innerText="File name: ".concat(e.name),s.innerText="File extension: ".concat(e.type),u.innerText="File size: ".concat(e.size),m.innerText="remove item",m.classList.add("btn-remove"),m.classList.add("btn"),m.classList.add("red"),d.onload=function(){r.returnLongLat(d,(function(t){p.innerText="Picture was taken on long/lat: ".concat(t.longitude,", ").concat(t.latitude),b.setView(t),b.setMarker(t,e.name),m.setAttribute("name","longlat#".concat(t.longitude,"#").concat(t.latitude))}))},a.appendChild(d),a.appendChild(o),l.appendChild(a),l.appendChild(s),l.appendChild(u),l.appendChild(p),c.appendChild(m),i.appendChild(l),n.appendChild(a),n.appendChild(i),n.appendChild(c),t.appendChild(n),t}},E={uploadImage:function(e,t){e.addEventListener("change",(function(e){Array.from(e.target.files).forEach((function(e){c.a.validateImage(e,(function(n){n.hasGPSData.isCorrect&&n.goodFileSize.isCorrect&&n.validFileExtension.isCorrect?t.appendChild(y.singleImageTemplate(e)):l.displayError(n,document.querySelector(".container"),6e3)}))}))}))},removeImage:function(e){e.addEventListener("click",(function(e){if(e.target.classList.contains("btn-remove")){var t=e.target.parentElement.parentElement.parentElement;b.removeButtonOnClickHandler(e.target),t.remove()}}))}};n(4);var L=document.querySelector("#upload-file__image"),C=document.querySelector("#upload-preview");E.uploadImage(L,C),E.removeImage(C),b.startMap()}]);