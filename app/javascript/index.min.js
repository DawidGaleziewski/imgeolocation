(function(){function u(i,o,d){function l(a,e){if(!o[a]){if(!i[a]){var t="function"==typeof require&&require;if(!e&&t)return t(a,!0);if(c)return c(a,!0);var n=new Error("Cannot find module '"+a+"'");throw n.code="MODULE_NOT_FOUND",n}var r=o[a]={exports:{}};i[a][0].call(r.exports,function(e){var t=i[a][1][e];return l(t||e)},r,r.exports,u,i,o,d)}return o[a].exports}for(var c="function"==typeof require&&require,e=0;e<d.length;e++)l(d[e]);return l}return u})()({1:[function(e,t,a){"use strict";var n=i(e("./modules/UploadFileHandler"));var r=i(e("./modules/MapHandler"));function i(e){return e&&e.__esModule?e:{default:e}}var o=document.querySelector("#upload-file__image");var d=document.querySelector("#upload-preview");n["default"].uploadImage(o,d);n["default"].removeImage(d);r["default"].startMap()},{"./modules/MapHandler":4,"./modules/UploadFileHandler":5}],2:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:true});a["default"]=void 0;var n=function(){function e(t,n,r){var e=Object.keys(t).filter(function(e){return t[e].isCorrect===false}).map(function(e){return t[e].description});e.forEach(function(e){var t=document.createElement("div");t.className="card alert";var a=document.createElement("span");a.className="error-text";a.innerText="Error: ".concat(e);t.appendChild(a);n.prepend(t);setTimeout(function(){n.removeChild(t)},r)})}return{displayError:e}}();var r=n;a["default"]=r},{}],3:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:true});a["default"]=void 0;var n=function(){var r=function e(t){return t[0].numerator+t[1].numerator/(60*t[1].denominator)+t[2].numerator/(3600*t[2].denominator)};function e(e,n){EXIF.getData(e,function(){var e=r(EXIF.getTag(this,"GPSLongitude"));var t=r(EXIF.getTag(this,"GPSLatitude"));var a={longitude:e,latitude:t};n(a)})}return{returnLongLat:e}}();var r=n;a["default"]=r},{}],4:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:true});a["default"]=void 0;var n=function(){var n=L.map("mapid").setView([51.505,-.09],13);function e(){L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox.streets",accessToken:"pk.eyJ1IjoiZGF3aWRnYWxlemlld3NraWRldiIsImEiOiJjazF5MmtrenUwY21mM29uc3R2NWY2eG80In0.tnl8PPwx5p-xDKirHF6O2Q"}).addTo(n)}function t(e){n.panTo(new L.LatLng(e.latitude,e.longitude))}var r=[];function a(e,t){r.push({latitude:e.latitude,longitude:e.longitude,objectReference:new L.marker([e.latitude,e.longitude]).bindPopup("Picture name: ".concat(t)).addTo(n)})}function i(a){r.forEach(function(e,t){console.log(e.longitude,a.longitude);if(e.longitude===a.longitude){n.removeLayer(e.objectReference);r.splice(t,1);console.log("bang",r)}})}function o(e){var t=e.getAttribute("name").split("#");var a={longitude:parseFloat(t[1]),latitude:parseFloat(t[2])};i(a)}return{startMap:e,setMarker:a,setView:t,removeMarker:i,removeButtonOnClickHandler:o}}();var r=n;a["default"]=r},{}],5:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:true});a["default"]=void 0;var n=o(e("./ImageGeolocationHandler"));var r=o(e("./ValidateHandler"));var i=o(e("./AlertHandler"));var p=o(e("./MapHandler"));function o(e){return e&&e.__esModule?e:{default:e}}var d=function(f){function n(t){var e=document.createElement("div");e.classList.add("col");e.classList.add("m4");var a=document.createElement("div");a.classList.add("card");var n=document.createElement("div");n.classList.add("card-image");var r=document.createElement("span");r.classList.add("card-title");var i=document.createElement("div");i.classList.add("card-content");var o=document.createElement("div");o.classList.add("card-action");var d=document.createElement("ul");d.classList.add("collection");var l=document.createElement("img");var c=document.createElement("li");c.classList.add("collection-item");var u=document.createElement("li");u.classList.add("collection-item");var s=document.createElement("li");s.classList.add("collection-item");var m=document.createElement("li");l.src=URL.createObjectURL(t);r.innerText="File name: ".concat(t.name);c.innerText="File extension: ".concat(t.type);u.innerText="File size: ".concat(t.size);m.innerText="remove item";m.classList.add("btn-remove");m.classList.add("btn");m.classList.add("red");l.onload=function(){f.returnLongLat(l,function(e){s.innerText="Picture was taken on long/lat: ".concat(e.longitude,", ").concat(e.latitude);p["default"].setView(e);p["default"].setMarker(e,t.name);m.setAttribute("name","longlat#".concat(e.longitude,"#").concat(e.latitude))})};n.appendChild(l);n.appendChild(r);d.appendChild(n);d.appendChild(c);d.appendChild(u);d.appendChild(s);o.appendChild(m);i.appendChild(d);a.appendChild(n);a.appendChild(i);a.appendChild(o);e.appendChild(a);return e}function e(e,a){e.addEventListener("change",function(e){var t=Array.from(e.target.files);t.forEach(function(t){r["default"].validateImage(t,function(e){if(e.hasGPSData.isCorrect&&e.goodFileSize.isCorrect&&e.validFileExtension.isCorrect){a.appendChild(n(t))}else{i["default"].displayError(e,document.querySelector(".container"),6e3)}})})})}function t(e){e.addEventListener("click",function(e){if(e.target.classList.contains("btn-remove")){var t=e.target.parentElement.parentElement.parentElement;p["default"].removeButtonOnClickHandler(e.target);t.remove()}})}return{uploadImage:e,removeImage:t,singleImageTemplate:n}}(n["default"]);var l=d;a["default"]=l},{"./AlertHandler":2,"./ImageGeolocationHandler":3,"./MapHandler":4,"./ValidateHandler":6}],6:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:true});a["default"]=void 0;var n=function(){var r=function e(t,a){EXIF.getData(t,function(){var e=EXIF.getTag(this,"GPSLongitude")?true:false;a(e)})};var i=function e(t,a){var n=t/1e3;return n<=a};var o=function e(t,a){return a.includes(t)};var e=function e(t,a){var n={hasGPSData:{isCorrect:false,description:"Image uploaded does not have EXIF metadata on geolocation"},goodFileSize:{isCorrect:false,description:"Image uploaded is to big"},validFileExtension:{isCorrect:false,description:"Bad file format"}};r(t,function(e){n.hasGPSData.isCorrect=e;n.goodFileSize.isCorrect=i(t.size,1e3);n.validFileExtension.isCorrect=o(t.type,["image/jpeg"]);a(n)})};return{validateImage:e}}();var r=n;a["default"]=r},{}]},{},[1]);
//# sourceMappingURL=index.min.js.map
