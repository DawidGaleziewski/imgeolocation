{"version":3,"sources":["node_modules/browser-pack/_prelude.js","javascript/index.js","javascript/modules/AlertHandler.js","javascript/modules/ImageGeolocationHandler.js","javascript/modules/MapHandler.js","javascript/modules/UploadFileHandler.js","javascript/modules/ValidateHandler.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_UploadFileHandler","_interopRequireDefault","_MapHandler","UIinput","document","querySelector","UIoutput","uploadImage","removeImage","startMap","AlertHandler","displayError","errors","errorDurationTime","errorMessages","Object","keys","filter","key","isCorrect","map","description","forEach","errorMessage","errorTemplate","createElement","className","errorText","innerText","concat","appendChild","prepend","setTimeout","removeChild","ImageGeolocationHandler","toDecimal","number","numerator","denominator","returnLongLat","imgHTMLElement","callback","EXIF","getData","longitude","getTag","this","latitude","longLat","MapHandler","_mymap","L","setView","tileLayer","attribution","maxZoom","id","accessToken","addTo","longLatObject","panTo","LatLng","markersArray","addMarker","fileName","push","objectReference","marker","bindPopup","removeMarker","index","console","log","removeLayer","splice","removeButtonOnClickHandler","UIremoveButton","longLatRaw","getAttribute","split","longLatObj","parseFloat","setMarker","_ImageGeolocationHandler","_ValidateHandler","_AlertHandler","UploadFileHandler","singleImageTemplate","fileObject","sizeDiv","classList","add","cardDiv","cardImageDiv","cardTitleSpan","cardContent","cardAction","pictureInfoList","image","fileExtension","fileSize","fileGeoLocation","removeButton","src","URL","createObjectURL","name","type","size","onload","setAttribute","imageUploadHandler","fileInput","outputContainer","addEventListener","event","Array","from","target","files","file","validateImage","hasGPSData","goodFileSize","validFileExtension","removeImageHandler","imagesContainer","contains","card","parentElement","remove","ValidateHandler","_validateGPSData","valid","_validateFileSize","fileSizeLimitKB","fileSizeKB","_validateFileExtension","acceptableFileExtensionsArray","includes","gpsIsValid"],"mappings":"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","file":"index.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import UploadFileHandler from './modules/UploadFileHandler';\nimport MapHandler from './modules/MapHandler';\n\nconst UIinput = document.querySelector('#upload-file__image');\nconst UIoutput = document.querySelector('#upload-preview');\nUploadFileHandler.uploadImage(UIinput, UIoutput);\nUploadFileHandler.removeImage(UIoutput);\nMapHandler.startMap();\n\n\n// MapHandler.removeMarker({longitude: -0.09, latitude: 51.505});","const AlertHandler = (function(){\n    function displayError(errors, UIoutput, errorDurationTime){\n        //Convert errors to array of error messages\n        const errorMessages= Object.keys(errors).filter(function(key){\n            return errors[key].isCorrect === false\n        }).map(function(key){\n            return errors[key].description\n        })\n\n        errorMessages.forEach(function(errorMessage){\n            const errorTemplate = document.createElement('div');\n            errorTemplate.className = \"card alert\"\n            const errorText = document.createElement('span');\n                errorText.className=\"error-text\"\n                errorText.innerText = `Error: ${errorMessage}`;\n            errorTemplate.appendChild(errorText);\n\n            UIoutput.prepend(errorTemplate);\n            setTimeout(function(){\n                UIoutput.removeChild(errorTemplate)\n            }, errorDurationTime) \n        }) \n    }\n\n    return{\n        displayError: displayError\n    }\n})();\n\nexport default AlertHandler","//Module getting the geolocation of the image\n    //Accepts image and a callback function that handles the data return\n\nconst ImageGeolocationHandler = (function(){\n    //Helper function returning longitude and latitude as a float\n    const toDecimal = function (number) {\n        return number[0].numerator + number[1].numerator /\n            (60 * number[1].denominator) + number[2].numerator / (3600 * number[2].denominator);\n    };\n\n    function returnLongLat(imgHTMLElement, callback){\n        //function accepting the image and callback returning the data\n        EXIF.getData(imgHTMLElement, function(){\n\n            let longitude = toDecimal(EXIF.getTag(this,'GPSLongitude'));\n            let latitude = toDecimal(EXIF.getTag(this, 'GPSLatitude')); \n            \n            const longLat = {\n                longitude: longitude,\n                latitude: latitude\n            }   \n\n            callback(longLat)\n        })\n    }\n\n    //Public functions\n    return {\n        returnLongLat: returnLongLat \n    }\n\n})();\n\nexport default ImageGeolocationHandler;","\n//Maps\n\nconst MapHandler = (function(){\n    var _mymap = L.map('mapid').setView([51.505, -0.09], 13);\n    function startMap(){\n        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {\n            attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery Â© <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n            maxZoom: 18,\n            id: 'mapbox.streets',\n            accessToken: 'pk.eyJ1IjoiZGF3aWRnYWxlemlld3NraWRldiIsImEiOiJjazF5MmtrenUwY21mM29uc3R2NWY2eG80In0.tnl8PPwx5p-xDKirHF6O2Q'\n        }).addTo(_mymap);\n    \n    }\n\n    function setView(longLatObject){\n        _mymap.panTo(new L.LatLng(longLatObject.latitude, longLatObject.longitude));\n    }\n\n    var markersArray = [];\n    function addMarker(longLatObject, fileName){ \n\n        markersArray.push(\n            {\n                latitude: longLatObject.latitude ,\n                longitude: longLatObject.longitude,\n                objectReference: new L.marker([longLatObject.latitude ,longLatObject.longitude])\n                .bindPopup(`Picture name: ${fileName}`)\n                .addTo(_mymap)\n            }\n        )   \n    }\n\n    function removeMarker(longLatObject){\n        markersArray.forEach(function(marker, index){\n            console.log(marker.longitude, longLatObject.longitude)\n            if (marker.longitude === longLatObject.longitude){\n                \n                //Remove marker from the map using the object referance\n                _mymap.removeLayer(marker.objectReference);\n\n                //Remove marker from the array\n                markersArray.splice(index, 1)\n\n                console.log('bang', markersArray)\n            }\n        })\n    }\n\n    function removeButtonOnClickHandler(UIremoveButton){\n        //Covert the data stored in button dom to object\n        const longLatRaw = UIremoveButton.getAttribute('name').split('#');\n        const longLatObj = {\n            longitude: parseFloat(longLatRaw[1]),\n            latitude: parseFloat(longLatRaw[2])\n        };\n\n        removeMarker(longLatObj)\n    }\n\n\n    return {\n        startMap: startMap,\n        setMarker: addMarker,\n        setView: setView,\n        removeMarker: removeMarker,\n        removeButtonOnClickHandler: removeButtonOnClickHandler\n    }\n})();\n\nexport default MapHandler;\n","//Modeule handling image upload and getting all information\nimport ImageGeolocationHandler from './ImageGeolocationHandler';\nimport ValidateHandler from './ValidateHandler';\nimport AlertHandler from './AlertHandler';\nimport MapHandler from './MapHandler';\n\nconst UploadFileHandler = (function(ImageGeolocationHandler){\n    \n    function singleImageTemplate(fileObject){ \n        //Materializecss DOM elements\n        const sizeDiv = document.createElement('div');\n            sizeDiv.classList.add('col');\n            sizeDiv.classList.add('m4');\n        const cardDiv = document.createElement('div');\n            cardDiv.classList.add('card');\n            // cardDiv.classList.add('col');\n        const cardImageDiv = document.createElement('div');\n            cardImageDiv.classList.add('card-image');\n        const cardTitleSpan = document.createElement('span');\n            cardTitleSpan.classList.add('card-title');\n        const cardContent = document.createElement('div');\n            cardContent.classList.add('card-content');\n        const cardAction = document.createElement('div');\n            cardAction.classList.add('card-action');\n\n        //Create DOM elements with data\n        const pictureInfoList = document.createElement('ul');\n            pictureInfoList.classList.add('collection');\n        const image = document.createElement('img');\n        const fileExtension = document.createElement('li');\n            fileExtension.classList.add('collection-item')\n        const fileSize = document.createElement('li');\n            fileSize.classList.add('collection-item')\n        let fileGeoLocation = document.createElement('li');\n            fileGeoLocation.classList.add('collection-item');\n        const removeButton = document.createElement('li');\n\n        //Update DOM elements with data\n        image.src = URL.createObjectURL(fileObject);\n        cardTitleSpan.innerText = `File name: ${fileObject.name}`;\n        fileExtension.innerText = `File extension: ${fileObject.type}`;\n        fileSize.innerText = `File size: ${fileObject.size}`;\n        removeButton.innerText = 'remove item';\n            removeButton.classList.add('btn-remove');\n            removeButton.classList.add('btn');\n            removeButton.classList.add('red');\n        \n        image.onload = function(){\n            ImageGeolocationHandler.returnLongLat(image, function(longLat){\n                fileGeoLocation.innerText = `Picture was taken on long/lat: ${longLat.longitude}, ${longLat.latitude}`;\n                MapHandler.setView(longLat);\n                MapHandler.setMarker(longLat, fileObject.name);   \n                \n                //Adding data to button for easy removal of the object on map\n                removeButton.setAttribute('name', `longlat#${longLat.longitude}#${longLat.latitude}`);\n            });\n\n        }\n\n        //Update the parent list\n                    cardImageDiv.appendChild(image); \n                    cardImageDiv.appendChild(cardTitleSpan);\n                pictureInfoList.appendChild(cardImageDiv);\n                pictureInfoList.appendChild(fileExtension);\n                pictureInfoList.appendChild(fileSize);\n                pictureInfoList.appendChild(fileGeoLocation);\n                cardAction.appendChild(removeButton);\n            cardContent.appendChild(pictureInfoList);\n        cardDiv.appendChild(cardImageDiv)\n        cardDiv.appendChild(cardContent)\n        cardDiv.appendChild(cardAction)\n        sizeDiv.appendChild(cardDiv)\n\n        return sizeDiv;\n    }\n\n    function imageUploadHandler(fileInput, outputContainer){\n        //Add on change event handler to upload image to website\n        fileInput.addEventListener('change', function(event){\n            const fileInput = Array.from(event.target.files); \n            fileInput.forEach(function(file){\n                ValidateHandler.validateImage(file, function(errors){\n                    // console.log(errors)\n                    if(errors.hasGPSData.isCorrect && errors.goodFileSize.isCorrect && errors.validFileExtension.isCorrect){\n                        //Create single uploaded image and add metadata  \n                        outputContainer.appendChild(singleImageTemplate(file));\n                        //Add marker to map\n\n\n                    } else {\n                        AlertHandler.displayError(errors, document.querySelector('.container'), 6000)\n                    }\n                })\n            })\n        })\n    }\n\n    function removeImageHandler(imagesContainer){\n        imagesContainer.addEventListener('click', function(event){\n            if(event.target.classList.contains(\"btn-remove\")){\n                const card = event.target.parentElement.parentElement.parentElement;\n\n                //Remove marker from map\n                MapHandler.removeButtonOnClickHandler(event.target);\n\n                //Remove picture card from DOM\n                card.remove();\n            }\n        })\n    }\n    \n    return{\n        uploadImage: imageUploadHandler,\n        removeImage: removeImageHandler,\n        singleImageTemplate: singleImageTemplate\n    }\n})(ImageGeolocationHandler)\n\n\nexport default UploadFileHandler;","\nconst ValidateHandler = (function(){\n\n    const _validateGPSData = function(image, callback){\n        EXIF.getData(image, function(){\n            let valid = EXIF.getTag(this, 'GPSLongitude') ? true : false; \n            callback(valid);\n        }) \n    }\n\n    const _validateFileSize = function(fileSize,fileSizeLimitKB){\n        const fileSizeKB = fileSize/1000;\n        return (fileSizeKB <= fileSizeLimitKB)\n    }\n\n    const _validateFileExtension = function(fileExtension,acceptableFileExtensionsArray){\n        return (acceptableFileExtensionsArray.includes(fileExtension))\n    }\n\n    //Validate image and return a object with checks in the callback\n    const validateImage = function(image, callback){\n        const errors = {\n            hasGPSData: {\n                isCorrect:false,\n                description: 'Image uploaded does not have EXIF metadata on geolocation'\n            },\n            goodFileSize: {\n                isCorrect: false,\n                description: 'Image uploaded is to big'\n            }, \n            validFileExtension: {\n                isCorrect: false,\n                description: 'Bad file format'\n            }\n        }\n\n        _validateGPSData(image, function(gpsIsValid){\n            errors.hasGPSData.isCorrect = gpsIsValid;\n            errors.goodFileSize.isCorrect = _validateFileSize(image.size, 1000);\n            errors.validFileExtension.isCorrect = _validateFileExtension(image.type, [\"image/jpeg\"])\n            callback(errors)\n        })\n\n    }\n\n    return{\n        validateImage: validateImage\n    }\n})();\n\nexport default ValidateHandler;"]}